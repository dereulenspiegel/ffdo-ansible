#
# This file is managed by ansible. Do not edit by hand!
#

template bgp ibgp {
        local as {{as}};
        import all;
        export all;
        next hop self;
        multihop 64;
};

{% for host in groups['all'] %}
{% if hostvars[host]["inventory_hostname"] != inventory_hostname %}
protocol bgp {{hostvars[host]['inventory_hostname_short']}} from ibgp {
        source address {{mesh_ipv4|ipaddr('address')}};
        neighbor {{hostvars[host]['mesh_ipv4']|ipaddr('address')}} as {{as}};
        default bgp_med 4;
};
{% endif %}
{% endfor %}
