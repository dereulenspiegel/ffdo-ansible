# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

#
# This file is generated by ansible
#

## Host Interfaces

auto lo
iface lo inet loopback

{%for interface in uplink_interfaces %}
{% if interface.auto is defined and interface.auto %}
auto {{interface.name}}
{% endif %}
{% if interface.hotplug is defined and interface.hotplug %}
allow-hotplug {{interface.name}}
{% endif %}
iface {{interface.name}} {{interface.proto}} {{interface.type}}
{% if interface.config is defined %}
{% for config in interface.config %}
    {{config.key}} {{config.value}}
{% endfor %}
{% endif %}

{% endfor %}

{% if uplink_gre_tunnel is defined %}
{% for tunnel in uplink_gre_tunnel %}
{% if tunnel.comment is defined %}
# {{tunnel.comment}}
{% endif %}
auto {{tunnel.name}}
iface {{tunnel.name}} inet tunnel
    mode gre
    address {{tunnel.address}}
    dstaddr {{tunnel.dstaddr}}
    netmask {{tunnel.netmask}}
    local {{tunnel.local|ipaddr('address')}}
    endpoint {{tunnel.endpoint}}
    mtu 1400
    ttl 64

iface {{tunnel.name}} inet6 static
    address {{tunnel.address_v6}}

{% endfor %}
{% endif %}