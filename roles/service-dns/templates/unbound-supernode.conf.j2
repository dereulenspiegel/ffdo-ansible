server:
  # Disables DNSSEC
  module-config: "iterator"
  interface: 0.0.0.0
  interface: ::0
{% if mesh_ipv4 is defined %}
  access-control: {{mesh_ipv4|ipaddr('network')}} allow
{% endif %}
{% if mesh_ipv6 is defined %}
  access-control: {{mesh_ipv6|ipaddr('network')}} allow
{% endif %}
  access-control: fe80::/10 allow

local-zone: "services.ffdo.de." static
{% for host in groups['supernodes'] %}
{% if hostvars[host].mesh_ipv4 is defined %}
local-data: "{{loop.index}}.ntp.services.ffdo.de. A {{hostvars[host].mesh_ipv4|ipaddr('address')}}"
{% endif %}
{% if hostvars[host].mesh_ipv6 is defined %}
local-data: "{{loop.index}}.ntp.services.ffdo.de. AAAA {{hostvars[host].mesh_ipv6|ipaddr('address')}}"
{% endif %}
{% endfor %}
local-data: "update.services.ffdo.de. AAAA {{ffruhr_update_server}}"

forward-zone:
  name: .
{% for dns in ffruhr_dns_servers %}
  forward-addr: {{dns}}
{% endfor %}