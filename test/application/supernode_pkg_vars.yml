supernodes:
  - name: node01
    public_ip: 192.168.77.21
    mesh_ip_v4: 10.42.0.8/16
    mesh_ip_v6: fdec:16a3:681b:865c::8/64
    mesh_mac: 96:48:76:b5:a3:61
    bat_mac: f2:43:13:c0:d7:06
    dhcp_range_start: 10.42.0.32
    dhcp_range_end: 10.42.5.254
    public_interface: eth1
    uplink_tunnel_ip: 172.16.42.2/30
    uplink_tunnel_ip_v6: fd30:db1d:2377:4143::2/64
  - name: node02
    public_ip: 192.168.77.22
    mesh_ip_v4: 10.42.0.16/16
    mesh_ip_v6: fdec:16a3:681b:865c::16/64
    mesh_mac: c2:e1:c6:e5:68:4c
    bat_mac: 1e:f5:dc:71:bb:5f
    dhcp_range_start: 10.42.6.2
    dhcp_range_end: 10.42.8.254
    public_interface: eth1

supernode_mesh_mac: 96:48:76:b5:a3:61
supernode_mesh_ipv4: 10.42.0.1/16
supernode_as: '65403'
supernode_bat_macaddress: f2:43:13:c0:d7:06
supernode_mesh_ipv6: 2a03:2260:50:5::8/64
supernode_local_ip: "{{ansible_default_ipv4.address}}"
supernode_public_interface: "{{ansible_default_ipv4.interface}}"
supernode_other_nameserver: 10.42.0.23
supernode_other_ntp_server: 10.42.0.23
supernode_dhcp_range_start: 10.42.9.1
supernode_dhcp_range_end: 10.42.45.25
supernode_top_domain: ff.test

supernode_mesh_backbones:
  - name: "{{supernodes[1].name}}"
    remote_ip: "{{supernodes[1].public_ip}}"
    mesh_ip: "{{supernodes[1].mesh_ip_v4|ipaddr('address')}}"
    address_v6: "{{supernodes[1].mesh_ip_v6|ipaddr('address')}}"
    local_ip: "{{supernode_local_ip|ipaddr('address')}}"
    interface: "{{supernode_public_interface}}"

supernode_uplinks:
  - name: uplink1
    comment: Non existant uplink
    address: 172.16.0.1
    dstaddr: 172.16.0.2
    netmask: 255.255.255.252
    endpoint: 192.168.0.23
    address_v6: fd0a:1c06:d97c:e88d::2/64
    as: '65079'

fastd_instances:
  - name: do00
    bind: any:10000 interface "eth0" default ipv4
    interface: tap00
    loglevel: info
    mode: tap
    method: salsa2012+umac
    peer_limit: 125
    mtu: 1280
    status_socket: /tmp/fastd00.sock
    peer_dir: /etc/fastd/do00/dummy
    on_up_script: |
      ip link set up $INTERFACE
      batctl if add $INTERFACE
    on_verify_script: |
      /etc/fastd/fastd-blacklist.sh $PEER_KEY
  - name: do01
    bind: any:10001 interface "eth0" default ipv4
    interface: tap01
    loglevel: info
    mode: tap
    method: salsa2012+umac
    peer_limit: 125
    mtu: 1280
    status_socket: /tmp/fastd01.sock
    peer_dir: /etc/fastd/do01/dummy
    on_up_script: |
      ip link set up $INTERFACE
      batctl if add $INTERFACE
    on_verify_script: |
      /etc/fastd/fastd-blacklist.sh $PEER_KEY

fastd_instances_secret:
  - name: do00
    secret: 280088c4263359417e9f2daf1771db820ab79eb4f79e3718719b2a976e8a8b5e
  - name: do01
    secret: 280088c4263359417e9f2daf1771db820ab79eb4f79e3718719b2a976e8a8b5e

supernode_interfaces:
  - name: eth0
    auto: true
    proto: inet
    type: dhcp

usermanage_usersdb:
  fritz:
    comment: "Fritz Brinkhoffs"
    state: "present"
    groups: "sudo"
    keys:
    - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQCfO2TgNUMcY9K8N9SsAU/LfVtlloO50n6NRxDER8dCi+t1ydalTbNdEj52cIjqvIEn458cCxdCwsNYeWqSVggX7vT7a+DgYZlJcRteHcb0lPYZplPuiZe3AUE9rHH48W4xEopv7J8Wz6hLng6Gb0TQx9HeVybQ5dn6CGyt8sOCKQ== Fritz Brinkhoffs"